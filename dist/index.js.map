{"version":3,"sources":["../src/index.jsx"],"names":["PullDown","props","state","offset","pulling","__container","__lastPageY","__threshold","document","querySelector","container","refs","content","parentNode","threshold","__sensitivity","sensitivity","id","class","e","handleTouchStart","handleTouchMove","handleTouchEnd","minHeight","WebkitTransition","WebkitTransform","transition","transform","tip","children","onPullCancel","onPullDown","scrollTop","touches","pageY","setState","handlePullCancel","handlePullDown","preventDefault","Component"],"mappings":"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","file":"index.js","sourcesContent":["import React from 'react'\nimport './index.css'\n\nclass PullDown extends React.Component{\n\n  constructor(props) {\n\n    super(props)\n    this.state = {\n      offset: 0,\n      pulling: false\n    }\n\n    this.__container = null\n    this.__lastPageY = 0\n    this.__threshold = 0\n\n  }\n\n  componentDidMount() {\n\n    this.__container = document.querySelector(this.props.container) || this.refs.content.parentNode\n    this.__threshold = this.props.threshold || 200\n    this.__sensitivity = this.props.sensitivity || .4\n\n  }\n\n  render() {\n\n    return (\n      <div\n        ref=\"content\"\n        id={this.props.id || 'react-pulldown'}\n        className={'react-pulldown ' + this.props.class}\n        onTouchStart={(e) => this.handleTouchStart(e)}\n        onTouchMove={(e) => this.handleTouchMove(e)}\n        onTouchEnd={(e) => this.handleTouchEnd(e)}\n        style={{\n          minHeight: this.props.minHeight || '100%', \n          WebkitTransition: this.state.pulling ? 'none' : 'transform .3s',\n          WebkitTransform: 'translateZ(0) translateY(' + this.state.offset / (1 / this.__sensitivity) + 'px)',\n          transition: this.state.pulling ? 'none' : 'transform .3s',\n          transform: 'translateZ(0)  translateY(' + this.state.offset / (1 / this.__sensitivity) + 'px)'\n        }}\n        >\n          <div className=\"react-pulldown-tip\">{this.props.tip}</div>\n          {this.props.children}\n        </div>\n    )\n\n  }\n\n  handlePullCancel() {\n\n    typeof this.props.onPullCancel === 'function' && this.props.onPullCancel()\n\n  }\n\n  handlePullDown() {\n\n    typeof this.props.onPullDown === 'function' && this.props.onPullDown()\n\n  }\n\n  handleTouchStart(e) {\n\n    if (this.__container.scrollTop > 0) {\n      return\n    }\n\n    this.__lastPageY = e.touches[0].pageY\n    this.setState({\n      pulling: true\n    })\n\n  }\n\n  handleTouchEnd() {\n\n    if (this.__container.scrollTop > 0) {\n      return\n    }\n\n    if (this.state.offset < this.__threshold) {\n      this.handlePullCancel()\n    } else {\n      this.handlePullDown()\n    }\n\n    this.setState({\n      pulling: false,\n      offset: 0\n    })\n\n  }\n\n  handleTouchMove(e) {\n\n    if (this.__container.scrollTop > 0) {\n      return\n    }\n\n    let offset = e.touches[0].pageY - this.__lastPageY\n    offset < 0 && (offset = 0)\n    offset > this.__threshold && (offset = this.__threshold)\n    offset > 0 &&  e.preventDefault()\n\n    this.setState({ offset })\n\n  }\n\n}\n\nexport default PullDown"]}